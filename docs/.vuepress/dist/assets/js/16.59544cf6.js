(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{426:function(t,s,a){t.exports=a.p+"assets/img/3.71bc6768.png"},427:function(t,s,a){t.exports=a.p+"assets/img/4.7734ec25.png"},452:function(t,s,a){"use strict";a.r(s);var n=a(54),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[n("img",{attrs:{src:a(426),alt:"a"}}),t._v(" "),n("img",{attrs:{src:a(427),alt:"a"}})]),t._v(" "),n("h4",{attrs:{id:"_16-8生命周期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_16-8生命周期"}},[t._v("#")]),t._v(" 16.8生命周期")]),t._v(" "),n("h4",{attrs:{id:"_17生命周期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_17生命周期"}},[t._v("#")]),t._v(" 17生命周期")]),t._v(" "),n("ul",[n("li",[t._v("改变三个原有的生命周期\n因为滥用可能导致一些问题：componentWillReceiveProps componentWillUpdate componentWillMount"),n("br"),t._v("\n需要加前缀UNSAFE_，不加也可以兼容，但浏览器有警告提示")]),t._v(" "),n("li",[t._v("新增两个生命周期\ngetDerivedStateFromProps【是静态方法】")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//若state的值在任何时候都取决于props，那么可以使用getDerivedStateFromProps")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDerivedStateFromProps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("state")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'getDerivedStateFromProps'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("getSnapshotBeforeUpdate"),n("br"),t._v("\n触发更新之前可以存储快照，可能出现在 UI 处理中，如需要以特殊方式处理滚动位置的聊天线程等")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSnapshotBeforeUpdate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("refs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//传给componentDidUpdate")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//(即更新之前，保存一下原来的状态，再把它传给更新时候的函数)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);