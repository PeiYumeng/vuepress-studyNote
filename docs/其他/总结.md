#### 自我介绍

您好，我叫裴雨萌，去年毕业的，大学学的软件工程专业，除了计算机基础课程的学习，大二下学期学校开设前端方向，从那时起就接触了解前端的相关知识。去年四月份在用友金融实习，一直到现在，工作中主要负责的是税务产品这条线，平时的工作内容主要是封装一些公共组件便于后台开发使用，和一些新的功能需求节点开发，技术栈主要以React为主。

#### 介绍一下项目

我们的产品主要是全面税务管理系统。

#### 介绍一下现在的团队

我们公司产品研发部的前端团队一共不到二十人，主要分为原生和h5方向。h5方向下为支持不同的产品线分组，每一个产品线有一到两个前端，还有六七个后端和需求、测试。

#### 你希望工作的团队是什么样子的

希望团队氛围融洽、直接，在工作中专业的探讨技术问题，对自己的工作负责，不敷衍了事。

#### 短时间内为什么考虑离职

因为用友金融属于用友集团子公司，现在平台和产品已经很稳定，公司整体偏向税务、证券这方面的需求和业务，很多组件和框架都是集团维护我们拿过来用就好，现在公司希望我们以后的发展方向为更多的了解业务，接触到的技术方面的问题大同小异。

其实自己也有了解一些前沿的的技术，在工作中其实用到的不太多。比如React我们公司现有项目多数仍然使用类组件，hooks使用很少。所以我希望有机会去更大的平台接触更多的前端开发技术。

#### 个人规划

现在比较倾向于React开发，下一步的学习计划是深入了解React源码，希望自己先在React领域学好。也不是只学React，Vue方面也有了解。之后比较感兴趣的方向是打算自己学习移动端开发。

#### 怎么封装公共组件的

公司现有tinper组件库，每个前端项目都设置有公共组件，是对tinper组件的二次封装，这样有助于对该项目的业务场景更加方便、统一的使用。

我近期修改了一个左树右表的参照组件。

#### 项目中遇到的问题 与困难 以及挑战，如何解决的

1. 不熟悉公司框架。
2. **不了解公司的参照组件**。（先总的介绍参照组件，再说遇到的问题）

1⃣️参照是表单中的一项，表单中展示为一个input框，其中右侧有一个Icon点击可以弹出一个模态框，模态框中为该项的所有数据信息。

2⃣️比如左树右表形式的参照，即模态框内左侧有一棵树，可以点击树的每个节点，联动查右侧表格的数据，最终勾选一条表格的数据，点击确定之后关闭模态框。

3⃣️表单的input框中显示该条数据的内容名称。其实input框中存储的是该参照特定格式的信息，即是一个JSON封装的对象，里面有refpk为该条数据的主键，方便查询数据库表使用，refname为显示的名称，如果是左树右表结构还有refcode存储连接两侧的编码内容。

4⃣️其他类似的还有树参照和表参照，模态框中有input搜索框方便查找特定信息

- 表单联动问题

因为一开始不熟悉这种数据结构，所以可能导致表单显示的内容与真正存储的pk值没有一同改变。如果只改变了refname，因为二次封装的公共组件自身维护state中封装一个JSON对象，pk不变不会创建新对象，则无法更新组件内容。

为了避免别人使用的时候（后端）误以为改了refname就整体变化，所以改为接收value为一个JSON格式，不再分别单独接受组件自己封装JSON对象。

可能使用JSON封装的话，方便表单正则校验

- 模态框内input无法获得焦点问题

由于表单中已有一个input框，点击其中的图标获得焦点，弹出的模态框里面的input则无法获取焦点。需要给外层的input失去焦点操作

- 树参照如果想要求只末级可选：把禁用写成一个函数的形式，函数中判断是否为子集返回true\false，内层组件每次递归树的时候判断每个节点禁用情况
- 如果只是想通过matchData这种api标记一下默认可勾选内容，但在打开模态框之前没有实际存储的值。就需要把value和matchData区分开，tinper原有的组件没有接收matchData属性，因为现在已经不再维护，去源码下载改了一下参数接收再发布到node包上
- 因为有的扩展不得不修改源组件，所以创建了git库，把修改的都集中在一起，和同事一起维护
- 还改过表参照的分页问题，组件内部一页显示多少条写死了，导致不同的业务场景下数量不合适

3. 封装附件管理组件

4. 微前端相关

1⃣️总的来说，微前端是让每个功能节点，独立开发、独立部署和维护。这样并行开发效率比较高，节点直接的耦合导致的复杂度降低

2⃣️我们公司的微前端框架主要用的是iframe实现的，用iframe把各个节点的css\js分隔

3⃣️首先在我们的一个系统里，现有一个平台外壳的项目，里面集成了登陆、节点配置的功能。用户在这个平台登陆之后，把信息存入到Cookie当中，方便各个节点共享用户登陆信息。然后管理员可以配置该平台项目的节点信息。平台最左侧是二级菜单，可以配置项目有哪些税务要上线，和税务之中部署哪些节点。配置路径相当于注册路由，然后点击菜单的时候去相关地址找组件资源

（即，加载不同的节点，路径改变，重新加载iframe）

4⃣️在每个节点里，都是一个占满屏幕的iframe，节点之间都可以样式、js相互隔离不相互影响

iframe问题：

1⃣️业务完全解藕项目独立，一个系统就会集成几个前端项目，那么每个项目中的公共组件不能共享。如果修改，需要每个都修改一遍

2⃣️每个节点之间相互独立，节点之间跳转使用路由把参数带过去，节点内部又分为list页和card页。

主要具体问题：外面是个壳子，整体刷新里面的iframe就会跟着刷新src就会丢失，所以在平台里打开每个页签的时候会使用session存储每个节点的路径信息，如果整体刷新的话会读取缓存中的数据信息。但问题在于，每个节点是独立的，如果是节点里的组件跳转会配置子路由，比如list跳转到card页面，在card页面刷新会回到list页面，不能缓存组件状态，所以就需要这个时候再去更改session的内容

节点之间数据共享：Redux或前端缓存

(父项目给子项目发消息，一定要先确认 iframe 是否加载完成了。可以使用postMessage解决前端跨域问题)

域名不一样有跨域限制，使用window.postmessage()接收两个参数(内容，目标域名)，再去目标下监听事件

```js
 window.addEventListener('message', function (e) {  // 监听 message 事件
   if (e.origin !== "https://www.runoob.com") {  // 验证消息来源地址
     return;
   }
   messageEle.innerHTML = "从"+ e.origin +"收到消息： " + e.data;
 });
```

其他微前端：基于single-spa封装的qiankun 

#### 优缺点

缺点：工作经验比较少，对税务、证券等财会领域不熟悉，不能深入理解需求，导致开发时候容易考虑业务场景不够周全

优点：有自我驱动能力，能够持续学习。不希望自己混日子，追求自己能有能力上的提升。

#### 提问

问题 1.公司主要的业务是什么？

问题2.如果假设比如说（多说几个这类词 能显示出你可能期望）我如果入职之后可能会负责 或者 做那些工作  

 

