<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>逃离大迷宫 | Hello VuePress</title>
    <meta name="generator" content="VuePress 1.8.3">
    <link rel="icon" href="./logo.png">
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/vuepress-studyNote/assets/css/0.styles.c5220385.css" as="style"><link rel="preload" href="/vuepress-studyNote/assets/js/app.57c16235.js" as="script"><link rel="preload" href="/vuepress-studyNote/assets/js/2.00654c4d.js" as="script"><link rel="preload" href="/vuepress-studyNote/assets/js/36.95ece739.js" as="script"><link rel="prefetch" href="/vuepress-studyNote/assets/js/10.8bdba072.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/11.c0459775.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/12.622e4347.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/13.d657a2e9.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/14.c675d45b.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/15.13915e3b.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/16.89dea890.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/17.86167f1e.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/18.417327ad.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/19.90d041e5.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/20.856c557f.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/21.ab1152c2.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/22.0657a454.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/23.f15c4747.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/24.a1d073d4.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/25.feb7ead8.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/26.5fee1abe.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/27.04c45ad4.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/28.c03aa9ee.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/29.2e2612ba.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/3.d7907780.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/30.cb59cffc.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/31.ee96de2e.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/32.0f85a349.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/33.03fd2c17.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/34.57e7738f.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/35.d713f23c.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/37.ecdc9a20.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/38.4bb4fb4c.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/39.794617ef.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/4.9663fa9d.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/40.3ce6fbb8.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/41.51c6cec5.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/5.af36595f.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/6.0f952876.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/7.a648995c.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/8.26754a8f.js"><link rel="prefetch" href="/vuepress-studyNote/assets/js/9.1a515532.js">
    <link rel="stylesheet" href="/vuepress-studyNote/assets/css/0.styles.c5220385.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-studyNote/" class="home-link router-link-active"><!----> <span class="site-name">Hello VuePress</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/vuepress-studyNote/Webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/vuepress-studyNote/网络原理.html" class="sidebar-link">网络原理</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>算法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-studyNote/算法/算法总结.html" class="sidebar-link">算法总结</a></li><li><a href="/vuepress-studyNote/算法/字符串.html" class="sidebar-link">字符串</a></li><li><a href="/vuepress-studyNote/算法/数组.html" class="sidebar-link">数组</a></li><li><a href="/vuepress-studyNote/算法/链表.html" class="sidebar-link">链表</a></li><li><a href="/vuepress-studyNote/算法/栈.html" class="sidebar-link">栈</a></li><li><a href="/vuepress-studyNote/算法/动态规划.html" class="sidebar-link">动态规划</a></li><li><a href="/vuepress-studyNote/算法/排序.html" class="sidebar-link">排序</a></li><li><a href="/vuepress-studyNote/算法/最短路径.html" class="active sidebar-link">最短路径</a></li><li><a href="/vuepress-studyNote/算法/广度优先.html" class="sidebar-link">广度优先</a></li><li><a href="/vuepress-studyNote/算法/牛客题库总结.html" class="sidebar-link">牛客总结</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NodeJs</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h4 id="逃离大迷宫"><a href="#逃离大迷宫" class="header-anchor">#</a> 逃离大迷宫</h4> <p>题目描述：需要从源位置走到目标位置，中间设有障碍物，判断是否可以走到<br> <strong>优化bfs：计算障碍物最大可以围住的方格，如果源位置和目标位置都不在其中，则可以到达</strong>
整体思路：<strong>通过bfs判断从当前位置走到下一个位置，其中扫描过的方格数是否大于可包围的最大方格数</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> dirs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">//四个方向</span>
<span class="token keyword">const</span> <span class="token constant">BOUNDARY</span> <span class="token operator">=</span> <span class="token number">1000000</span><span class="token punctuation">;</span>
<span class="token comment">//常规的广度优先搜索，看是否从source访问到target</span>
<span class="token comment">//bfs可以判断是否可以到达，无需记录路径</span>
<span class="token keyword">var</span> <span class="token function-variable function">isEscapePossible</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">blocked<span class="token punctuation">,</span> source<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//主函数</span>
    <span class="token keyword">let</span> n <span class="token operator">=</span> blocked<span class="token punctuation">.</span>length
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果只有1个障碍，无法围成圈必然能走过去</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> hashBlocked <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> pos <span class="token keyword">of</span> blocked<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//注意，不能直接存进去，要遍历每个小数组存进去</span>
        hashBlocked<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//广度优先搜索遍历</span>
    <span class="token keyword">let</span> ans <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> visited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> temp <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> x <span class="token operator">=</span> temp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token keyword">let</span> y <span class="token operator">=</span> temp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> dir <span class="token keyword">of</span> dirs<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> x_ <span class="token operator">=</span> x<span class="token operator">+</span>dir<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            <span class="token keyword">let</span> y_ <span class="token operator">=</span> y<span class="token operator">+</span>dir<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>x_ <span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_ <span class="token operator">&lt;</span><span class="token constant">BOUNDARY</span> <span class="token operator">&amp;&amp;</span> y_ <span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_<span class="token operator">&lt;</span><span class="token constant">BOUNDARY</span>
            <span class="token operator">&amp;&amp;</span><span class="token operator">!</span>hashBlocked<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x_<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y_<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token operator">&amp;&amp;</span><span class="token operator">!</span>visited<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x_<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y_<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//找到下一步</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>x_ <span class="token operator">==</span> target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> y_ <span class="token operator">==</span>target<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    ans <span class="token operator">=</span> <span class="token boolean">true</span>
                    <span class="token keyword">return</span> 
                <span class="token punctuation">}</span>
                visited<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x_<span class="token punctuation">,</span>y_<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x_<span class="token punctuation">,</span>y_<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ans
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="跳跃游戏"><a href="#跳跃游戏" class="header-anchor">#</a> 跳跃游戏</h4> <p>题目描述：可以从当前位置跳下一个值相同的位置，或相邻位置，即i+1\i-1\arr【i】==arr【j】<br>
返回最少的跳跃次数
数据存储：idxMap存储了一个值，对应了哪几个节点下标、explored是否访问过
整体思路：第一个节点入队，找到未访问过的下一个节点（相同值、左、右三种情况）入队，直到找到最后一个节点跳出循环<br>
优化：通过set或map已访问节点不再访问</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">var</span> <span class="token function-variable function">minJumps</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> idxMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">//所以内容的关联关系</span>
        explored <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">//是否访问过</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>idxMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          idxMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
      <span class="token keyword">else</span>
          idxMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//存储形式为，一个值，对应哪几个节点的下标</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> nodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> step <span class="token operator">=</span> <span class="token number">0</span>   <span class="token comment">//跟节点提前入队</span>
  explored<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>nodes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">const</span> nxt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> cur <span class="token keyword">of</span> nodes<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
              <span class="token keyword">return</span> step
          <span class="token keyword">if</span><span class="token punctuation">(</span>idxMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//从map里面找到这个节点</span>
              <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> other <span class="token keyword">of</span> idxMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>explored<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                      explored<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span>
                      nxt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span> <span class="token comment">//push下一个可以跳的相同值的节点</span>
                  <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
              idxMap<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//删除当前节点（防止重复）</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>explored<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>cur <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//相邻位置节点</span>
              explored<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
              nxt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>               
          <span class="token punctuation">}</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>explored<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>cur <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              explored<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cur <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
              nxt<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      nodes <span class="token operator">=</span> nxt
      step<span class="token operator">++</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="到达目的地的第二短时间"><a href="#到达目的地的第二短时间" class="header-anchor">#</a> 到达目的地的第二短时间</h4> <p>题目描述：一个双向连通图，每过一条边需要time时间，每change时间需要等待红绿灯<br>
数据结构设置：1.graph存储每个节点的相邻节点<br>
2.path存储从1节点到每个节点的最短路径与次最短路径长度
3.queue队列里存储的是从1节点走到的下一个节点【下一个节点，从1到这里的长度（边数）】<br>
🎈**重点bfs:**队头出队，更新相邻节点的最短路径长度，相邻节点入队，直到更新了末尾节点的次最短长度<br> <strong>每次访问下一个相邻节点时，比较len+1，即下一步如果走这个节点是否更新了最短或次最短路径长度，更新操作之后入队</strong><br>
🎉整体思路：从当前节点出发，找到下一个可以访问的节点，比较如果下一步访问这个节点是否路径更短或者次最短，如果更短则更新path内容并push进入队列</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">secondMinimum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> edges<span class="token punctuation">,</span> time<span class="token punctuation">,</span> change</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//graph存图每个节点可以到达的其他节点</span>
  <span class="token keyword">const</span> graph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> edge <span class="token keyword">of</span> edges<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      graph<span class="token punctuation">[</span>edge<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>edge<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      graph<span class="token punctuation">[</span>edge<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>edge<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//path[i][0] 表示从 1 到 i 的最短路长度，path[i][1] 表示从 1 到 i 的严格次短路长度</span>
  <span class="token comment">//path二维数组存的最短路径，是路过的边数，因为是无权图可以按1算</span>
  <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  path<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>path<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//更新path每个格值，直到找到到n的次最小路径</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>cur<span class="token punctuation">,</span> len<span class="token punctuation">]</span> <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//cur是指哪个节点，len是从1到该节点的路径长度</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> next <span class="token keyword">of</span> graph<span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//graph里面存了相邻的节点</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> path<span class="token punctuation">[</span>next<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//如果步数+1小于path节点的值（初始化是无穷大）</span>
              path<span class="token punctuation">[</span>next<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">//更新该节点最短路径（即+1步即可到达）</span>
              queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>next<span class="token punctuation">,</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//把下一步可以走的节点push队列</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&gt;</span> path<span class="token punctuation">[</span>next<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> len <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> path<span class="token punctuation">[</span>next<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//如果+1步比最小路径大、比次最小路径小</span>
              path<span class="token punctuation">[</span>next<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">//更新次最小路径</span>
              queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>next<span class="token punctuation">,</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//把下一步可以走的节点push队列</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//计算算上红绿灯的时间</span>
  <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> path<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//每次到节点的时候都需要+边长和可能+等待时间</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> change<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> change<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果2倍取余还大于change（如果只取余一个change，无法判断数比change大还是小）</span>
          ret <span class="token operator">=</span> ret <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> change <span class="token operator">-</span> ret <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> change<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      ret <span class="token operator">=</span> ret <span class="token operator">+</span> time<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">secondMinimum</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-studyNote/算法/排序.html" class="prev">
        排序
      </a></span> <span class="next"><a href="/vuepress-studyNote/算法/广度优先.html">
        广度优先
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/vuepress-studyNote/assets/js/app.57c16235.js" defer></script><script src="/vuepress-studyNote/assets/js/2.00654c4d.js" defer></script><script src="/vuepress-studyNote/assets/js/36.95ece739.js" defer></script>
  </body>
</html>
